{
  "populationThresholds": {
    "1": { "min": 0, "max": 200, "name": "Hamlet" },
    "2": { "min": 201, "max": 1500, "name": "Village" },
    "3": { "min": 1501, "max": 10000, "name": "Town" },
    "4": { "min": 10001, "max": 100000, "name": "City" },
    "5": { "min": 100001, "max": 999999999, "name": "Metropolis" }
  },
  "merchantCount": {
    "formula": "population-scaled",
    "minSlotsPerSize": [1, 2, 3, 4, 5],
    "populationMultiplier": 0.0001,
    "sizeMultiplier": 1.5,
    "flagMultipliers": {
      "trade": 1.5
    },
    "hardCap": 10
  },
  "cargoSelection": {
    "producesWeight": 8,
    "demandsWeight": 5,
    "flagTransferMultiplier": 10
  },
  "skillDistribution": {
    "type": "piecewise",
    "baseSkill": 25,
    "wealthModifier": 8,
    "variance": 20,
    "percentileTable": {
      "10": -15,
      "25": -8,
      "50": 0,
      "75": 8,
      "90": 15,
      "95": 25,
      "99": 35
    },
    "minSkill": 5,
    "maxSkill": 95
  },
  "desperation": {
    "skillPenalty": 0.2,
    "priceModifier": 0.85,
    "quantityReduction": 0.25,
    "qualityPenalty": -1,
    "availabilityPenalty": -10
  },
  "equilibrium": {
    "baseline": {
      "supply": 100,
      "demand": 100
    },
    "producesShift": 0.5,
    "demandsShift": 0.35,
    "seasonalShifts": {
      "spring": { "agriculture": 0.2 },
      "summer": { "agriculture": 0.1 },
      "autumn": { "agriculture": 0.3 },
      "winter": { "subsistence": 0.2 }
    },
    "wealthModifiers": {
      "1": -0.1,
      "2": -0.05,
      "3": 0,
      "4": 0.05,
      "5": 0.1
    },
    "clamp": {
      "min": 5,
      "max": 195
    },
    "blockTradeThreshold": {
      "supply": 10,
      "demand": 10
    },
    "desperationThreshold": {
      "supply": 20,
      "demand": 20
    }
  },
  "cargoAmount": {
    "baseFormula": "ceil(roll/10) * 10 * settlementSize",
    "supplyModifier": "max(0.5, supply/demand)"
  },
  "qualityEvaluation": {
    "baseScore": "settlementWealthRating",
    "flagBonuses": {},
    "marketPressureModifiers": {
      "glut": 1,
      "scarce": -1,
      "desperate": -2
    },
    "tierMapping": {
      "1-2": "Poor",
      "3-4": "Common",
      "5-6": "Average",
      "7-8": "High",
      "9-10": "Exceptional"
    }
  },
  "contraband": {
    "baseChance": 0.05,
    "flagBonuses": {},
    "sizeBonuses": {
      "1": 0,
      "2": 0.01,
      "3": 0.02,
      "4": 0.03,
      "5": 0.05
    }
  },
  "pricing": {
    "cargoSizeFormula": "(settlementSizeRating + settlementWealthRating) * ceil(d100/10) * 10",
    "contrabandDiscount": 0.85,
    "desperationPenalties": {
      "scarce": 1.1,
      "desperate": 1.2
    },
    "buyingModifiers": {
      "metalworkingBonus": 0.1,
      "partialPurchaseSurcharge": 0.1
    },
    "sellingModifiers": {
      "wealthMultipliers": {
        "1": 0.5,
        "2": 0.8,
        "3": 1.0,
        "4": 1.05,
        "5": 1.1
      },
      "tradeRumorsMultiplier": 2.0,
      "quickSaleMultiplier": 0.5
    }
  }
}